#!/bin/bash
# CLI Setup Script
# Installs the dot CLI using uv tool install in editable mode

DOTFILES_DIR="$HOME/.oh-my-zsh/custom"

if [ -f "$DOTFILES_DIR/pyproject.toml" ]; then
  if command -v uv >/dev/null 2>&1; then
    # Force reinstall to pick up structural changes
    uv tool uninstall dot >/dev/null 2>&1 || true
    if uv tool install --editable "$DOTFILES_DIR" --force >/dev/null 2>&1; then
      echo "✓ CLI setup complete"
    else
      echo "✗ CLI installation failed - uv tool install error"
      exit 1
    fi
  else
    echo "✗ CLI installation failed - uv not found"
    exit 1
  fi
else
  echo "✗ CLI installation failed - pyproject.toml not found"
  exit 1
fi